CC       := gcc
CFLAGS   := -Wall -Wextra -Werror -pedantic -Wall -Wno-deprecated-declarations -O3
LFLAGS   := -lmatio -lm
PREFIX   := ../../bin/utils

BIN = matcomparison matgenerator
BIN_PATH = $(addprefix $(PREFIX)/, $(BIN))

all: $(BIN)

$(BIN): %: %.c
	@echo "Compiling $< - $(notdir $(PREFIX))"
	@mkdir -p $(PREFIX)
	@$(CC) -o $(PREFIX)/$@ $< ${CFLAGS} ${LFLAGS}

clean:
	@echo "Cleaning - $(notdir $(PREFIX))"
	@rm $(BIN_PATH)
	@rmdir --ignore-fail-on-non-empty $(PREFIX)

.PHONY: all clean